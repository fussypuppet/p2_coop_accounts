<h1>Shareholder Index</h1>
<% if (error) { %>
    <h2>Error: <%= JSON.stringify(error) %></h2>}
<% } %>
<% if (shareholdersList) { %>
    <table class="table">
        <tr>
            <th>
                Name
            </th>
            <th>
                Unit
            </th>
            <th>
                Balance
            </th>
        </tr>
        <% shareholdersList.forEach(shareholder => { %>
            <tr>
                <td>
                    <p><%= shareholder.name %></p>
                    <% if (shareholder.name2){ %>
                        <p>& <%= shareholder.name2 %></p>
                    <% } %>
                </td>
                <td>
                    <p><%= shareholder.unit.number %></p>
                </td>
                <td>
                    <% shareholder.dues.forEach(duesAmount => { %>
                        <p>$<%= duesAmount.amount %>, from <%= duesAmount.startMonth %>/<%= duesAmount.startYear %> to 
                            <% if (duesAmount.endMonth) { %>
                                <%= duesAmount.endMonth %>/<%= duesAmount.endYear %>
                            <% } else { %>
                                present
                            <% } %>
                        </p>
                    <% }) %>
                </td>
            </tr>
        <% }) %>
    </table>
<% } %>